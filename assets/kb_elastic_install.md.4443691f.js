import{_ as s,c as a,o as n,O as l}from"./chunks/framework.0d343703.js";const u=JSON.parse('{"title":"安装部署","description":"","frontmatter":{},"headers":[],"relativePath":"kb/elastic/install.md","lastUpdated":1682564862000}'),e={name:"kb/elastic/install.md"},p=l(`<h1 id="安装部署" tabindex="-1">安装部署 <a class="header-anchor" href="#安装部署" aria-label="Permalink to &quot;安装部署&quot;">​</a></h1><h2 id="rhel" tabindex="-1">RHEL <a class="header-anchor" href="#rhel" aria-label="Permalink to &quot;RHEL&quot;">​</a></h2><p>安装目录</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">|---data                                    --     </span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---app                                 -- 应用目录    </span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---|---data                            -- 数据目录</span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---|---|---elasticsearch               -- ElasticSearch</span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---|---|---|---data                    -- ElasticSearch数据目录</span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---|---|---|---logs                    -- ElasticSearch日志目录 </span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---|---temp                            -- 临时目录</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>把安装包上传到临时目录后，执行命令安装</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 安装</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">elasticsearch-7.17.7-x86_64.rpm</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>初始化数据目录并授权</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 新建数据目录和日志目录 </span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/app/data/elasticsearch/data</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/app/data/elasticsearch/logs</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 赋予目录权限</span></span>
<span class="line"><span style="color:#FFCB6B;">chown</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-R</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">elasticsearch.elasticsearch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/app/data/elasticsearch/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>打开并编辑配置文件</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/elasticsearch/elasticsearch.yml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Elasticsearch Configuration</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 集群名称</span></span>
<span class="line"><span style="color:#FFCB6B;">cluster.name:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">elasticsearch</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 节点名称</span></span>
<span class="line"><span style="color:#FFCB6B;">node.name:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">main</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 数据目录</span></span>
<span class="line"><span style="color:#FFCB6B;">path.data:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/app/data/elasticsearch/data</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 日志目录</span></span>
<span class="line"><span style="color:#FFCB6B;">path.logs:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/app/data/elasticsearch/logs</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 绑定IP地址</span></span>
<span class="line"><span style="color:#FFCB6B;">network.host:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">127.0.0.1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安全控制</span></span>
<span class="line"><span style="color:#FFCB6B;">xpack.security.enabled:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span></span>
<span class="line"><span style="color:#FFCB6B;">xpack.security.transport.ssl.enabled:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Cluster</span></span>
<span class="line"><span style="color:#FFCB6B;">discovery.</span><span style="color:#82AAFF;">type</span><span style="color:#FFCB6B;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">single-node</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>分词插件</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">unzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">elasticsearch-analysis-ik-7.17.7.zip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/share/elasticsearch/plugins/ik</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>打开并编辑JVM配置文件</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 打开编辑配置文件</span></span>
<span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/elasticsearch/jvm.options</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>增加内存参数</p></blockquote><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-Xms2g</span></span>
<span class="line"><span style="color:#FFCB6B;">-Xmx2g</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>启动服务</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 随系统启动</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">elasticsearch.service</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 启动服务</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">elasticsearch.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>默认密码</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">/usr/share/elasticsearch/bin/elasticsearch-setup-passwords</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">interactive</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">​</a></h2>`,22),c=[p];function t(o,r,i,b,d,y){return n(),a("div",null,c)}const m=s(e,[["render",t]]);export{u as __pageData,m as default};
