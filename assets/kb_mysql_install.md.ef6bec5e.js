import{_ as s,o as n,c as a,S as l}from"./chunks/framework.0c55f2c5.js";const m=JSON.parse('{"title":"安装部署","description":"","frontmatter":{},"headers":[],"relativePath":"kb/mysql/install.md","filePath":"kb/mysql/install.md","lastUpdated":1691580575000}'),p={name:"kb/mysql/install.md"},e=l(`<h1 id="安装部署" tabindex="-1">安装部署 <a class="header-anchor" href="#安装部署" aria-label="Permalink to &quot;安装部署&quot;">​</a></h1><h2 id="rhel" tabindex="-1">RHEL <a class="header-anchor" href="#rhel" aria-label="Permalink to &quot;RHEL&quot;">​</a></h2><p>安装目录</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">|---data                    --      </span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---app                 -- 应用目录    </span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---|---data            -- 数据目录    </span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---|---|---mysql       -- MySQL</span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---|---|---|---data    -- MySQL数据目录</span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---|---|---|---logs    -- MySQL日志目录</span></span>
<span class="line"><span style="color:#A6ACCD;">|---|---|---temp            -- 临时目录</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>把下载回来的压缩包上传到服务器临时目录下，解压缩后逐一安装。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 解压缩</span></span>
<span class="line"><span style="color:#FFCB6B;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xvf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql-8.0.33-1.el8.x86_64.rpm-bundle.tar</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安装</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql-community-common-8.0.33-1.el8.x86_64.rpm</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql-community-client-plugins-8.0.33-1.el8.x86_64.rpm</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql-community-libs-8.0.33-1.el8.x86_64.rpm</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql-community-client-8.0.33-1.el8.x86_64.rpm</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql-community-icu-data-files-8.0.33-1.el8.x86_64.rpm</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql-community-server-8.0.33-1.el8.x86_64.rpm</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>初始化数据目录并授权。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 新建数据目录和日志目录 </span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/app/data/mysql/data</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/app/data/mysql/logs</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 创建日志文件，这一步非必须</span></span>
<span class="line"><span style="color:#FFCB6B;">touch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/app/data/mysql/logs/mysql.log</span></span>
<span class="line"><span style="color:#FFCB6B;">touch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/app/data/mysql/logs/mysql-slow.log</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 赋予目录权限</span></span>
<span class="line"><span style="color:#FFCB6B;">chown</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-R</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql.mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/app/data/mysql/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>打开配置文件。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/my.cnf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>编辑内容如下</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">mysqld</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 端口</span></span>
<span class="line"><span style="color:#A6ACCD;">port</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">3306</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安装目录和数据目录</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># basedir=/data/app/tools/mysql/server</span></span>
<span class="line"><span style="color:#A6ACCD;">datadir</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/data/app/data/mysql/data</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 表名不区分大小写</span></span>
<span class="line"><span style="color:#A6ACCD;">lower_case_table_names</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 编码</span></span>
<span class="line"><span style="color:#A6ACCD;">character-set-server</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">utf8mb4</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 字符集</span></span>
<span class="line"><span style="color:#A6ACCD;">collation-server</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">utf8mb4_0900_ai_ci</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 指定时区</span></span>
<span class="line"><span style="color:#A6ACCD;">default-time-zone</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">+8:00</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 最大连接数</span></span>
<span class="line"><span style="color:#A6ACCD;">max_connections</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">128</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 错误日志</span></span>
<span class="line"><span style="color:#A6ACCD;">log-error</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/data/app/data/mysql/logs/mysql.log</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 慢查询</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 开启慢查询日志</span></span>
<span class="line"><span style="color:#A6ACCD;">slow-query-log</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">on</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 慢查询日志路径</span></span>
<span class="line"><span style="color:#A6ACCD;">slow_query_log_file</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/data/app/data/mysql/logs/mysql-slow.log</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 修改为记录5秒内的查询，默认为记录10秒内的查询</span></span>
<span class="line"><span style="color:#A6ACCD;">long_query_time</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">5</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 记录未使用索引的查询</span></span>
<span class="line"><span style="color:#A6ACCD;">log-queries-not-using-indexes</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">on</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">mysqldump</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">max_allowed_packet</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">8</span><span style="color:#C3E88D;">M</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>启动服务</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 随系统启动</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysqld.service</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 启动服务</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysqld.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>修改默认密码</p><blockquote><p>数据库启动初始化完成后，会生成一个临时的密码保存在/var/log/mysqld.log的日志文件里面。 所以第一次登录时需要查到这个临时密码，并使用临时密码登录后修改初始密码。</p></blockquote><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 自定义目录，按上面配置文件，需要从这里查找初始密码</span></span>
<span class="line"><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">temporary password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data/app/data/mysql/logs/mysql.log</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 默认目录</span></span>
<span class="line"><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">temporary password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/log/mysqld.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">​</a></h2><p>安装目录</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---D</span><span style="color:#A6ACCD;">                       </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---Tools</span><span style="color:#A6ACCD;">               </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---MySQL</span><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MySQL目录</span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---Server</span><span style="color:#A6ACCD;">      </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MySQL安装目录</span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---Data</span><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MySQL数据目录</span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---Logs</span><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MySQL日志目录</span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---my.ini</span><span style="color:#A6ACCD;">      </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">配置文件</span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---temp</span><span style="color:#A6ACCD;">            </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">临时目录</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>把绿色安装包解压缩到安装目录下，新建配置文件，内容参考如下</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">mysqld</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 端口</span></span>
<span class="line"><span style="color:#A6ACCD;">port</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">3306</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安装目录和数据目录</span></span>
<span class="line"><span style="color:#A6ACCD;">basedir</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\T</span><span style="color:#C3E88D;">ools</span><span style="color:#A6ACCD;">\\M</span><span style="color:#C3E88D;">ySQL</span><span style="color:#A6ACCD;">\\S</span><span style="color:#C3E88D;">erver</span></span>
<span class="line"><span style="color:#A6ACCD;">datadir</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\T</span><span style="color:#C3E88D;">ools</span><span style="color:#A6ACCD;">\\M</span><span style="color:#C3E88D;">ySQL</span><span style="color:#A6ACCD;">\\D</span><span style="color:#C3E88D;">ata</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 表名不区分大小写</span></span>
<span class="line"><span style="color:#A6ACCD;">lower_case_table_names</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 编码</span></span>
<span class="line"><span style="color:#A6ACCD;">character-set-server</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">utf8mb4</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 字符集</span></span>
<span class="line"><span style="color:#A6ACCD;">collation-server</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">utf8mb4_0900_ai_ci</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 指定时区</span></span>
<span class="line"><span style="color:#A6ACCD;">default-time-zone</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">+8:00</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 启用传统密码策略认证</span></span>
<span class="line"><span style="color:#A6ACCD;">default_authentication_plugin</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">mysql_native_password</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 错误日志</span></span>
<span class="line"><span style="color:#A6ACCD;">log-error</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\T</span><span style="color:#C3E88D;">ools</span><span style="color:#A6ACCD;">\\M</span><span style="color:#C3E88D;">ySQL</span><span style="color:#A6ACCD;">\\L</span><span style="color:#C3E88D;">ogs</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">ysql.log</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 慢查询</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 开启慢查询日志</span></span>
<span class="line"><span style="color:#A6ACCD;">slow-query-log</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">on</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 慢查询日志路径</span></span>
<span class="line"><span style="color:#A6ACCD;">slow_query_log_file</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\T</span><span style="color:#C3E88D;">ools</span><span style="color:#A6ACCD;">\\M</span><span style="color:#C3E88D;">ySQL</span><span style="color:#A6ACCD;">\\L</span><span style="color:#C3E88D;">ogs</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">ysql-slow.log</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 修改为记录5秒内的查询，默认为记录10秒内的查询</span></span>
<span class="line"><span style="color:#A6ACCD;">long_query_time</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">5</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 记录未使用索引的查询</span></span>
<span class="line"><span style="color:#A6ACCD;">log-queries-not-using-indexes</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">on</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">mysqldump</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">max_allowed_packet</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">8</span><span style="color:#C3E88D;">M</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>执行下面命令完成安装和系统服务配置</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 初始化数据库</span></span>
<span class="line"><span style="color:#FFCB6B;">mysqld</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--initialize-insecure</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--datadir=D:</span><span style="color:#A6ACCD;">\\T</span><span style="color:#C3E88D;">ools</span><span style="color:#A6ACCD;">\\M</span><span style="color:#C3E88D;">ySQL</span><span style="color:#A6ACCD;">\\D</span><span style="color:#C3E88D;">ata</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安装系统服务</span></span>
<span class="line"><span style="color:#FFCB6B;">mysqld</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MySQL</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--defaults-file=D:</span><span style="color:#A6ACCD;">\\T</span><span style="color:#C3E88D;">ools</span><span style="color:#A6ACCD;">\\M</span><span style="color:#C3E88D;">ySQL</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">y.ini</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 手工启动服务</span></span>
<span class="line"><span style="color:#FFCB6B;">mysqld</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--defaults-file=D:</span><span style="color:#A6ACCD;">\\T</span><span style="color:#C3E88D;">ools</span><span style="color:#A6ACCD;">\\M</span><span style="color:#C3E88D;">ySQL</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">y.ini</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 移除系统服务</span></span>
<span class="line"><span style="color:#FFCB6B;">mysqld</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">–remove</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MySQL</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 启动</span></span>
<span class="line"><span style="color:#FFCB6B;">net</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MySQL</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 停止</span></span>
<span class="line"><span style="color:#FFCB6B;">net</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MySQL</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>服务启动后，可以直接连，默认账号密码为空，这点跟RHEL有区别。</p><h2 id="macos" tabindex="-1">MacOS <a class="header-anchor" href="#macos" aria-label="Permalink to &quot;MacOS&quot;">​</a></h2>`,26),o=[e];function r(c,t,y,i,C,D){return n(),a("div",null,o)}const A=s(p,[["render",r]]);export{m as __pageData,A as default};
