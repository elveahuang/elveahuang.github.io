import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.33544f09.js";const F=JSON.parse('{"title":"安装部署","description":"","frontmatter":{},"headers":[],"relativePath":"kb/mongo/install.md","filePath":"kb/mongo/install.md","lastUpdated":1695713644000}'),p={name:"kb/mongo/install.md"},o=l(`<h1 id="安装部署" tabindex="-1">安装部署 <a class="header-anchor" href="#安装部署" aria-label="Permalink to &quot;安装部署&quot;">​</a></h1><h2 id="rhel-在线安装" tabindex="-1">RHEL - 在线安装 <a class="header-anchor" href="#rhel-在线安装" aria-label="Permalink to &quot;RHEL - 在线安装&quot;">​</a></h2><p>创建安装源</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vi</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/yum.repos.d/mongodb-org.repo</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vi</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/yum.repos.d/mongodb-org.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>安装源阿里云镜像内容如下</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[mongodb-org]</span></span>
<span class="line"><span style="color:#E1E4E8;">name</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">MongoDB</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Repository</span></span>
<span class="line"><span style="color:#E1E4E8;">baseurl</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">https://repo.mongodb.org/yum/redhat/</span><span style="color:#E1E4E8;">$releasever</span><span style="color:#9ECBFF;">/mongodb-org/6.0/x86_64/</span></span>
<span class="line"><span style="color:#E1E4E8;">gpgcheck</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">enabled</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">gpgkey</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">https://www.mongodb.org/static/pgp/server-6.0.asc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[mongodb-org]</span></span>
<span class="line"><span style="color:#24292E;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">MongoDB</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Repository</span></span>
<span class="line"><span style="color:#24292E;">baseurl</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">https://repo.mongodb.org/yum/redhat/</span><span style="color:#24292E;">$releasever</span><span style="color:#032F62;">/mongodb-org/6.0/x86_64/</span></span>
<span class="line"><span style="color:#24292E;">gpgcheck</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">enabled</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">gpgkey</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">https://www.mongodb.org/static/pgp/server-6.0.asc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>安装源官方镜像内容如下</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[mongodb-org]</span></span>
<span class="line"><span style="color:#E1E4E8;">name</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">MongoDB</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Repository</span></span>
<span class="line"><span style="color:#E1E4E8;">baseurl</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">https://repo.mongodb.org/yum/redhat/</span><span style="color:#E1E4E8;">$releasever</span><span style="color:#9ECBFF;">/mongodb-org/6.0/x86_64/</span></span>
<span class="line"><span style="color:#E1E4E8;">gpgcheck</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">enabled</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">gpgkey</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">https://www.mongodb.org/static/pgp/server-6.0.asc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[mongodb-org]</span></span>
<span class="line"><span style="color:#24292E;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">MongoDB</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Repository</span></span>
<span class="line"><span style="color:#24292E;">baseurl</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">https://repo.mongodb.org/yum/redhat/</span><span style="color:#24292E;">$releasever</span><span style="color:#032F62;">/mongodb-org/6.0/x86_64/</span></span>
<span class="line"><span style="color:#24292E;">gpgcheck</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">enabled</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">gpgkey</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">https://www.mongodb.org/static/pgp/server-6.0.asc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>安装</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb-org</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb-org</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="rhel-手工安装" tabindex="-1">RHEL - 手工安装 <a class="header-anchor" href="#rhel-手工安装" aria-label="Permalink to &quot;RHEL - 手工安装&quot;">​</a></h2><h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 解压缩</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zxvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb-linux-x86_64-rhel70-4.0.10.tgz</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-C</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">../tools</span></span>
<span class="line"><span style="color:#6A737D;"># 新建链接，方便后续升级</span></span>
<span class="line"><span style="color:#B392F0;">ln</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/app/tools/mongodb-linux-x86_64-rhel70-4.0.10</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/app/tools/mongodb</span></span>
<span class="line"><span style="color:#6A737D;"># 创建数据目录和日志目录</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/app/data</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logs</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 解压缩</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zxvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb-linux-x86_64-rhel70-4.0.10.tgz</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-C</span><span style="color:#24292E;"> </span><span style="color:#032F62;">../tools</span></span>
<span class="line"><span style="color:#6A737D;"># 新建链接，方便后续升级</span></span>
<span class="line"><span style="color:#6F42C1;">ln</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/app/tools/mongodb-linux-x86_64-rhel70-4.0.10</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/app/tools/mongodb</span></span>
<span class="line"><span style="color:#6A737D;"># 创建数据目录和日志目录</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/app/data</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">logs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="直接启动" tabindex="-1">直接启动 <a class="header-anchor" href="#直接启动" aria-label="Permalink to &quot;直接启动&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 直接启动</span></span>
<span class="line"><span style="color:#B392F0;">./mongod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dbpath=/data/app/data/mongodb/data</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--logpath=/data/app/data/mongodb/logs/mongo.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 直接启动</span></span>
<span class="line"><span style="color:#6F42C1;">./mongod</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dbpath=/data/app/data/mongodb/data</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--logpath=/data/app/data/mongodb/logs/mongo.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="后台启动" tabindex="-1">后台启动 <a class="header-anchor" href="#后台启动" aria-label="Permalink to &quot;后台启动&quot;">​</a></h3><p>新建配置文件，内容如下</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 数据目录</span></span>
<span class="line"><span style="color:#E1E4E8;">dbpath</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/data/app/data/mongodb/data</span></span>
<span class="line"><span style="color:#6A737D;"># 日志文件</span></span>
<span class="line"><span style="color:#E1E4E8;">logpath</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/data/app/data/mongodb/logs/mongo.log</span></span>
<span class="line"><span style="color:#6A737D;"># 端口号</span></span>
<span class="line"><span style="color:#E1E4E8;">port</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">27017</span></span>
<span class="line"><span style="color:#6A737D;"># 设置为以守护进程的方式运行，即在后台运行</span></span>
<span class="line"><span style="color:#B392F0;">fork</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 数据目录</span></span>
<span class="line"><span style="color:#24292E;">dbpath</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/data/app/data/mongodb/data</span></span>
<span class="line"><span style="color:#6A737D;"># 日志文件</span></span>
<span class="line"><span style="color:#24292E;">logpath</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/data/app/data/mongodb/logs/mongo.log</span></span>
<span class="line"><span style="color:#6A737D;"># 端口号</span></span>
<span class="line"><span style="color:#24292E;">port</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">27017</span></span>
<span class="line"><span style="color:#6A737D;"># 设置为以守护进程的方式运行，即在后台运行</span></span>
<span class="line"><span style="color:#6F42C1;">fork</span><span style="color:#24292E;"> </span><span style="color:#032F62;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>启动</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">./mongod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--config=/data/app/tools/mongodb/mongodb.config</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">./mongod</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--config=/data/app/tools/mongodb/mongodb.config</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="自启动" tabindex="-1">自启动 <a class="header-anchor" href="#自启动" aria-label="Permalink to &quot;自启动&quot;">​</a></h3><p>新建配置文件</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vi</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/lib/systemd/system/mongodb.service</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vi</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/lib/systemd/system/mongodb.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>内容参考如下</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[Unit]</span></span>
<span class="line"><span style="color:#E1E4E8;">Description</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">mongodb</span></span>
<span class="line"><span style="color:#E1E4E8;">After</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">network.target</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">remote-fs.target</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nss-lookup.target</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[Service]</span></span>
<span class="line"><span style="color:#E1E4E8;">Type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">forking</span></span>
<span class="line"><span style="color:#E1E4E8;">ExecStart</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/data/app/tools/mongodb/bin/mongod</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">--config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/app/tools/mongodb/mongodb.config</span></span>
<span class="line"><span style="color:#E1E4E8;">ExecReload</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/bin/kill</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">HUP</span><span style="color:#E1E4E8;"> $MAINPID</span></span>
<span class="line"><span style="color:#E1E4E8;">ExecStop</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/data/app/tools/mongodb/bin/mongod</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">--shutdown</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/app/tools/mongodb/mongodb.config</span></span>
<span class="line"><span style="color:#E1E4E8;">PrivateTmp</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[Install]</span></span>
<span class="line"><span style="color:#E1E4E8;">WantedBy</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">multi-user.target</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[Unit]</span></span>
<span class="line"><span style="color:#24292E;">Description</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">mongodb</span></span>
<span class="line"><span style="color:#24292E;">After</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">network.target</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">remote-fs.target</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nss-lookup.target</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[Service]</span></span>
<span class="line"><span style="color:#24292E;">Type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">forking</span></span>
<span class="line"><span style="color:#24292E;">ExecStart</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/data/app/tools/mongodb/bin/mongod</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">--config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/app/tools/mongodb/mongodb.config</span></span>
<span class="line"><span style="color:#24292E;">ExecReload</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/bin/kill</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">HUP</span><span style="color:#24292E;"> $MAINPID</span></span>
<span class="line"><span style="color:#24292E;">ExecStop</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/data/app/tools/mongodb/bin/mongod</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">--shutdown</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/app/tools/mongodb/mongodb.config</span></span>
<span class="line"><span style="color:#24292E;">PrivateTmp</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[Install]</span></span>
<span class="line"><span style="color:#24292E;">WantedBy</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">multi-user.target</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>执行授权</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">754</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/lib/systemd/system/mongodb.service</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">754</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/lib/systemd/system/mongodb.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>系统服务</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb.service</span></span>
<span class="line"><span style="color:#6A737D;"># 关闭服务</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb.service</span></span>
<span class="line"><span style="color:#6A737D;"># 开机启动</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb.service</span></span>
<span class="line"><span style="color:#6A737D;"># 检查端口确认是否已启动</span></span>
<span class="line"><span style="color:#B392F0;">netstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-lanp</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">27017</span></span>
<span class="line"><span style="color:#6A737D;"># 查看进程</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ef</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb.service</span></span>
<span class="line"><span style="color:#6A737D;"># 关闭服务</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb.service</span></span>
<span class="line"><span style="color:#6A737D;"># 开机启动</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enable</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb.service</span></span>
<span class="line"><span style="color:#6A737D;"># 检查端口确认是否已启动</span></span>
<span class="line"><span style="color:#6F42C1;">netstat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-lanp</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">27017</span></span>
<span class="line"><span style="color:#6A737D;"># 查看进程</span></span>
<span class="line"><span style="color:#6F42C1;">ps</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ef</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="macos-在线安装" tabindex="-1">MacOS - 在线安装 <a class="header-anchor" href="#macos-在线安装" aria-label="Permalink to &quot;MacOS - 在线安装&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="macos-手工安装" tabindex="-1">MacOS - 手工安装 <a class="header-anchor" href="#macos-手工安装" aria-label="Permalink to &quot;MacOS - 手工安装&quot;">​</a></h2><h3 id="安装-1" tabindex="-1">安装 <a class="header-anchor" href="#安装-1" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 准备安装目录</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/Users/elvea/Tools/mongodb/server</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/Users/elvea/Tools/mongodb/data</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/Users/elvea/Tools/mongodb/logs</span></span>
<span class="line"><span style="color:#6A737D;"># 解压缩</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zxvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb-macos-x86_64-4.4.1.tgz</span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb-macos-x86_64-4.4.1/</span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/Users/elvea/Tools/mongodb/server</span></span>
<span class="line"><span style="color:#6A737D;"># 删除源代码目录</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-rf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb-macos-x86_64-4.4.1</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-rf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mongodb-macos-x86_64-4.4.1.tgz</span></span>
<span class="line"><span style="color:#6A737D;"># 测试启动</span></span>
<span class="line"><span style="color:#B392F0;">mongod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dbpath</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">../../data</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--logpath</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">../../logs/mongo.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 准备安装目录</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/Users/elvea/Tools/mongodb/server</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/Users/elvea/Tools/mongodb/data</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/Users/elvea/Tools/mongodb/logs</span></span>
<span class="line"><span style="color:#6A737D;"># 解压缩</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zxvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb-macos-x86_64-4.4.1.tgz</span></span>
<span class="line"><span style="color:#6F42C1;">mv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb-macos-x86_64-4.4.1/</span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/Users/elvea/Tools/mongodb/server</span></span>
<span class="line"><span style="color:#6A737D;"># 删除源代码目录</span></span>
<span class="line"><span style="color:#6F42C1;">rm</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-rf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb-macos-x86_64-4.4.1</span></span>
<span class="line"><span style="color:#6F42C1;">rm</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-rf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mongodb-macos-x86_64-4.4.1.tgz</span></span>
<span class="line"><span style="color:#6A737D;"># 测试启动</span></span>
<span class="line"><span style="color:#6F42C1;">mongod</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dbpath</span><span style="color:#24292E;"> </span><span style="color:#032F62;">../../data</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--logpath</span><span style="color:#24292E;"> </span><span style="color:#032F62;">../../logs/mongo.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="系统服务" tabindex="-1">系统服务 <a class="header-anchor" href="#系统服务" aria-label="Permalink to &quot;系统服务&quot;">​</a></h3><p>新增配置文件</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vim</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/Library/LaunchAgents/mongodb.plist</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">vim</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/Library/LaunchAgents/mongodb.plist</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>配置内容如下</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">&lt;?</span><span style="color:#E1E4E8;">xml version=</span><span style="color:#9ECBFF;">&#39;1.0&#39;</span><span style="color:#E1E4E8;"> encoding=</span><span style="color:#9ECBFF;">&#39;UTF-8&#39;</span><span style="color:#F97583;">?&gt;</span></span>
<span class="line"><span style="color:#F97583;">&lt;!</span><span style="color:#B392F0;">DOCTYPE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plist</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PUBLIC</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">plist version=</span><span style="color:#9ECBFF;">&#39;1.0&#39;</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">dict&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">key&gt;Label&lt;/key&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">string&gt;mongodb&lt;/string&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">key&gt;ProgramArguments&lt;/key&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">array&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">string&gt;/Users/elvea/Tools/mongodb/server/bin/mongod&lt;/string&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">string&gt;--dbpath&lt;/string&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">string&gt;/Users/elvea/Tools/mongodb/data&lt;/string&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">string&gt;--logpath&lt;/string&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">string&gt;/Users/elvea/Tools/mongodb/logs/mongo.log&lt;/string&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">/array&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">key&gt;RunAtLoad&lt;/key&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">true/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">key&gt;KeepAlive&lt;/key&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">true/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">key&gt;WorkingDirectory&lt;/key&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">string&gt;/Users/elvea/Tools/mongodb/server/&lt;/string&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">key&gt;StandardErrorPath&lt;/key&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">string&gt;/Users/elvea/Tools/mongodb/logs/output.log&lt;/string&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">key&gt;StandardOutPath&lt;/key&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">string&gt;/Users/elvea/Tools/mongodb/logs/output.log&lt;/string&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">key&gt;HardResourceLimits&lt;/key&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">dict&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">key&gt;NumberOfFiles&lt;/key&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">integer&gt;10240&lt;/integer&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">/dict&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">key&gt;SoftResourceLimits&lt;/key&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">dict&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">key&gt;NumberOfFiles&lt;/key&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">integer&gt;10240&lt;/integer&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">/dict&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">&lt;</span><span style="color:#B392F0;">/dict&gt;</span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">/plist</span><span style="color:#F97583;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">&lt;?</span><span style="color:#24292E;">xml version=</span><span style="color:#032F62;">&#39;1.0&#39;</span><span style="color:#24292E;"> encoding=</span><span style="color:#032F62;">&#39;UTF-8&#39;</span><span style="color:#D73A49;">?&gt;</span></span>
<span class="line"><span style="color:#D73A49;">&lt;!</span><span style="color:#6F42C1;">DOCTYPE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plist</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PUBLIC</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">plist version=</span><span style="color:#032F62;">&#39;1.0&#39;</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">dict&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">key&gt;Label&lt;/key&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">string&gt;mongodb&lt;/string&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">key&gt;ProgramArguments&lt;/key&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">array&gt;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">string&gt;/Users/elvea/Tools/mongodb/server/bin/mongod&lt;/string&gt;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">string&gt;--dbpath&lt;/string&gt;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">string&gt;/Users/elvea/Tools/mongodb/data&lt;/string&gt;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">string&gt;--logpath&lt;/string&gt;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">string&gt;/Users/elvea/Tools/mongodb/logs/mongo.log&lt;/string&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">/array&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">key&gt;RunAtLoad&lt;/key&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">true/&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">key&gt;KeepAlive&lt;/key&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">true/&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">key&gt;WorkingDirectory&lt;/key&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">string&gt;/Users/elvea/Tools/mongodb/server/&lt;/string&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">key&gt;StandardErrorPath&lt;/key&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">string&gt;/Users/elvea/Tools/mongodb/logs/output.log&lt;/string&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">key&gt;StandardOutPath&lt;/key&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">string&gt;/Users/elvea/Tools/mongodb/logs/output.log&lt;/string&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">key&gt;HardResourceLimits&lt;/key&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">dict&gt;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">key&gt;NumberOfFiles&lt;/key&gt;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">integer&gt;10240&lt;/integer&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">/dict&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">key&gt;SoftResourceLimits&lt;/key&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">dict&gt;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">key&gt;NumberOfFiles&lt;/key&gt;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">integer&gt;10240&lt;/integer&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">/dict&gt;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">&lt;</span><span style="color:#6F42C1;">/dict&gt;</span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">/plist</span><span style="color:#D73A49;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>服务操作</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 验证配置文件</span></span>
<span class="line"><span style="color:#B392F0;">plutil</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-lint</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/Library/LaunchAgents/mongodb.plist</span></span>
<span class="line"><span style="color:#6A737D;"># 添加开机启动并立刻启动</span></span>
<span class="line"><span style="color:#B392F0;">launchctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">load</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/Library/LaunchAgents/mongodb.plist</span></span>
<span class="line"><span style="color:#6A737D;"># 取消开机启动并立刻停止</span></span>
<span class="line"><span style="color:#B392F0;">launchctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">unload</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/Library/LaunchAgents/mongodb.plist</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 验证配置文件</span></span>
<span class="line"><span style="color:#6F42C1;">plutil</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-lint</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/Library/LaunchAgents/mongodb.plist</span></span>
<span class="line"><span style="color:#6A737D;"># 添加开机启动并立刻启动</span></span>
<span class="line"><span style="color:#6F42C1;">launchctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">load</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/Library/LaunchAgents/mongodb.plist</span></span>
<span class="line"><span style="color:#6A737D;"># 取消开机启动并立刻停止</span></span>
<span class="line"><span style="color:#6F42C1;">launchctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">unload</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/Library/LaunchAgents/mongodb.plist</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">mongod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--serviceName</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MongoDB</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--serviceDisplayName</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MongoDB</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--logpath</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">D:</span><span style="color:#79B8FF;">\\D</span><span style="color:#9ECBFF;">ev</span><span style="color:#79B8FF;">\\D</span><span style="color:#9ECBFF;">atabase</span><span style="color:#79B8FF;">\\M</span><span style="color:#9ECBFF;">ongo</span><span style="color:#79B8FF;">\\l</span><span style="color:#9ECBFF;">og</span><span style="color:#79B8FF;">\\M</span><span style="color:#9ECBFF;">ongoDB.Log</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dbpath</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">D:</span><span style="color:#79B8FF;">\\D</span><span style="color:#9ECBFF;">ev</span><span style="color:#79B8FF;">\\D</span><span style="color:#9ECBFF;">atabase</span><span style="color:#79B8FF;">\\M</span><span style="color:#9ECBFF;">ongo</span><span style="color:#79B8FF;">\\d</span><span style="color:#9ECBFF;">ata</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--directoryperdb</span></span>
<span class="line"><span style="color:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="color:#B392F0;">net</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MongoDB</span></span>
<span class="line"><span style="color:#6A737D;"># 停止服务</span></span>
<span class="line"><span style="color:#B392F0;">net</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MongoDB</span></span>
<span class="line"><span style="color:#6A737D;"># 移除服务</span></span>
<span class="line"><span style="color:#B392F0;">mongod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--remove</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--serviceName</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MongoDB</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">mongod</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--serviceName</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MongoDB</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--serviceDisplayName</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MongoDB</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--logpath</span><span style="color:#24292E;"> </span><span style="color:#032F62;">D:</span><span style="color:#005CC5;">\\D</span><span style="color:#032F62;">ev</span><span style="color:#005CC5;">\\D</span><span style="color:#032F62;">atabase</span><span style="color:#005CC5;">\\M</span><span style="color:#032F62;">ongo</span><span style="color:#005CC5;">\\l</span><span style="color:#032F62;">og</span><span style="color:#005CC5;">\\M</span><span style="color:#032F62;">ongoDB.Log</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dbpath</span><span style="color:#24292E;"> </span><span style="color:#032F62;">D:</span><span style="color:#005CC5;">\\D</span><span style="color:#032F62;">ev</span><span style="color:#005CC5;">\\D</span><span style="color:#032F62;">atabase</span><span style="color:#005CC5;">\\M</span><span style="color:#032F62;">ongo</span><span style="color:#005CC5;">\\d</span><span style="color:#032F62;">ata</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--directoryperdb</span></span>
<span class="line"><span style="color:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="color:#6F42C1;">net</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MongoDB</span></span>
<span class="line"><span style="color:#6A737D;"># 停止服务</span></span>
<span class="line"><span style="color:#6F42C1;">net</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MongoDB</span></span>
<span class="line"><span style="color:#6A737D;"># 移除服务</span></span>
<span class="line"><span style="color:#6F42C1;">mongod</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--remove</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--serviceName</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MongoDB</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div>`,43),e=[o];function t(r,c,y,i,E,d){return n(),a("div",null,e)}const g=s(p,[["render",t]]);export{F as __pageData,g as default};
